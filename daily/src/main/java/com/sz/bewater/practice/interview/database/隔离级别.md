innodb的四种隔离级别：
1.读未提交（最低 造成脏读、不可重复读、幻读）
2.读已提交（造成 不可重复读、幻读）
3.可重复读（mysql默认的隔离级别 造成幻读）
4.串行化（最高 同一时间点只允许一个事务操作  不会产生数据不一致）
幻读和不可重复读的理解：  幻读是导致最终结果条数多了   不可重复读是导致最终结果值与预期不一致 

mvcc（多版本并发控制解决不可重复读）  间隙锁解决幻读

间隙的理解:
在数据库中，"间隙"（Gap）指的是两个相邻数据行之间的空间。考虑一个例子，假设我们有一个表存储了学生信息，
其中的主键是学生的学号。假设有如下的数据：
| 学号 |
|------|
|  100 |
|  105 |
|  110 |
现在，如果我们执行一个范围查询，比如查找学号在101到109之间的所有学生，那么数据库会对这个范围内的数据行
（在这个例子中是学号为105）进行加锁。但是除了对实际存在的数据行进行加锁外，
数据库还会对范围之间的空隙（即不存在的数据行的位置）进行加锁。
在这个例子中，范围查询的间隙指的是学号在101和105之间、以及105和109之间的空间。

这样做的目的是防止其他事务在执行范围查询期间，在这些间隙中插入新的数据行。
通过对范围内的数据行和间隙进行加锁，数据库可以确保查询结果的一致性，
避免了其他事务插入了新的数据行，从而导致了幻读的问题。

MVCC：每个事务在开始时会被分配一个唯一的事务ID，并且在事务执行期间，数据库会保存数据的历史版本。
当事务执行读取操作时，数据库会根据事务的ID和数据的版本信息，选择合适的数据版本返回。
这样可以确保事务读取到的数据版本是在事务开始时存在的，从而避免了不可重复读的问题。
可以理解为一个事务id对应唯一的数据版本

间隙锁:是一种特殊的锁机制，用于锁定一个范围内的数据行和范围之间的间隙（即不存在的数据行）。
当一个事务执行范围查询时，数据库会对范围内的数据行和范围之间的间隙进行加锁，
防止其他事务在这个范围内插入新的数据行。这样可以确保查询结果的一致性，避免了幻读的问题。