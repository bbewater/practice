1. RDB（Redis Database）
   特点：

快照存储：RDB 会在某一时刻将整个 Redis 内存数据生成快照，并以二进制格式存储在磁盘上（通常是 dump.rdb 文件）。
快速恢复：由于 RDB 文件是紧凑的二进制文件，加载和恢复速度较快。
紧凑文件：RDB 文件占用空间较小，因为它仅包含实际的数据，没有日志的开销。
定时生成：RDB 持久化通常通过配置定期执行（如每隔一段时间或在某些条件满足时），例如每 60 秒或每 1000 次写操作生成一次快照。
优点：

快速恢复：重启 Redis 时，可以快速加载 RDB 文件恢复数据。
占用空间小：文件是紧凑的二进制格式，占用磁盘空间较小。
非阻塞操作：通过 fork 子进程生成快照，不阻塞主进程，保证业务连续性。
缺点：

数据丢失风险：由于 RDB 持久化是定时进行的，如果在生成快照之间 Redis 宕机，会丢失最近一次快照之后的数据修改。
生成快照开销大：生成快照时会消耗系统资源，特别是当数据量较大时，生成快照的速度会较慢。
save 900 1
save 300 10
save 60 10000
这意味着，如果在 900 秒内至少有 1 个键发生改变，
或者在 300 秒内至少有 10 个键发生改变，
或者在 60 秒内至少有 10000 个键发生改变，
Redis 会触发生成 RDB 快照。




2. AOF（Append Only File）
   特点：

操作日志：AOF 记录每一次对 Redis 数据进行修改的操作，以日志形式追加到文件中。
恢复通过重放：重启时通过重放 AOF 文件中的所有操作命令来恢复数据。
可配置同步策略：AOF 可以配置不同的同步策略，如 always（每次写操作都同步），everysec（每秒同步一次），no（操作系统决定何时同步）。
优点：

更高的数据安全性：通过配置 always 或 everysec，可以最小化数据丢失，确保数据的持久化更安全。
细粒度持久化：记录每一次操作，数据恢复时更精确，能够最小化丢失的数据量。
缺点：

恢复速度慢：因为需要重放整个 AOF 文件中的所有操作命令，恢复速度比 RDB 慢。
文件大小增长：AOF 文件会随着时间逐渐变大，需要定期进行日志重写（rewrite）来压缩文件大小，防止文件过大。
总结
RDB：适用于需要快速恢复和占用磁盘空间小的场景，但可能会丢失最近一次快照后的数据。生成快照过程中可能会消耗较多系统资源。
AOF：适用于需要更高数据安全性和最小化数据丢失的场景，但恢复速度较慢且文件会逐渐变大，需要定期重写以压缩文件。
Redis 支持同时启用 RDB 和 AOF 持久化，以结合两者的优点，实现快速恢复和高数据安全性的平衡。